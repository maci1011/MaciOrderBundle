
{% set i = 0 %}

<div class="page">


<section class="page_header page_container row">

{% if order.checkout == 'pickup' %}

<h3>{{ 'page.cart.pickup' | matra('Pickup In Store') }}</h3>

{% else %}

<h3>{{ 'page.cart.checkout' | matra('Checkout') }}</h3>

{% endif %}

</section>


{% if order.items|length %} {# --- Valid Checkout (^^) ---  #}


<section class="page_content page_container row">

	{% include "MaciOrderBundle:Default:_show.html.twig" with { 'order': order } %}

</section>


{% if checkout is defined and checkout %}

{% if checkout.billing %} {# --- Billing ---  #}
{% set i = i + 1 %}

{% if checkout.billing == 'set' %}

<section class="page_content page_container row active">

	<h4>{{ i }} - {{ 'page.checkout.billing' | matra('Billing') }}</h4>

	{% render(controller('MaciAddressBundle:Default:list', { 'select': path('maci_order_checkout_set_address', {'option': 'billing'}) } )) %}

	<br/><br/>

	{#%
		render(controller('MaciAddressBundle:Default:form', {
			'id': false,
			'method': {
				'The Billing Address is the same as that of Shipment.': path('maci_order_checkout_set_address', {'option': 'both'}),
				'The Billing Address is different from that of Shipment.': path('maci_order_checkout_set_address', {'option': 'billing'})
			}
		} ))
	%#}

	{% render(controller('MaciAddressBundle:Default:form', {'id': false, 'method': path('maci_order_checkout_set_address', {'option': 'billing'})})) %}

</section>

{% elseif checkout.billing == 'setted' %}

<section class="page_content page_container row setted">

	<h4>{{ i }} - {{ 'page.checkout.billing_to' | matra('Billing To') }}</h4>

	{% include "MaciAddressBundle:Default:_item.html.twig" with { 'address': order.billing } %}

	<a href="{{ path('maci_order_checkout', {'id': order.id,'checkout':'billing'}) }}" class="btn btn-success">{{ 'form.edit' | matra('Edit') }}</a>

</section>

{% elseif checkout.billing == 'toset' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.set_billing' | matra('Set Billing') }}</h4>

</section>

{% endif %}

{% endif %} {# --- End Billing ---  #}


{% if checkout.shipping %} {# --- Shipping ---  #}
{% set i = i + 1 %}

{% if checkout.shipping == 'set' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.shipping' | matra('Shipping') }}</h4>

	{% render(controller('MaciAddressBundle:Default:list', { 'select': path('maci_order_checkout_set_address', {'option': 'shipping'}) } )) %}

	<br/><br/>

	{% render(controller('MaciAddressBundle:Default:form', {'id': false, 'method': path('maci_order_checkout_set_address', {'option': 'shipping'})})) %}

</section>

{% elseif checkout.shipping == 'setted' %}

<section class="page_content page_container row setted">

	<h4>{{ i }} - {{ 'page.checkout.shipping_to' | matra('Shipping To') }}</h4>

	{% include "MaciAddressBundle:Default:_item.html.twig" with { 'address': order.shipping } %}

	<a href="{{ path('maci_order_checkout', {'id': order.id,'checkout':'shipping'}) }}" class="btn btn-success">{{ 'form.edit' | matra('Edit') }}</a>

</section>

{% elseif checkout.shipping == 'toset' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.set_shipping' | matra('Set Shipping') }}</h4>

</section>

{% endif %}

{% endif %} {# --- End Shipping ---  #}


{% if checkout.spedition %} {# --- Spedition ---  #}
{% set i = i + 1 %}

{% if checkout.spedition == 'set' %}

<section class="page_content page_container row active">

	<h4>{{ i }} - {{ 'page.checkout.spedition' | matra('Select Spedition') }}</h4>

	{% render(controller('MaciOrderBundle:Default:cartSetSpedition')) %}

</section>

{% elseif checkout.spedition == 'setted' %}

<section class="page_content page_container row setted">

	<h4>{{ i }} - {{ 'page.checkout.spedition_to' | matra('Spedition') }}</h4>

	<span>{{ order.speditionLabel }}</span>

	<br/><br/>

	<a href="{{ path('maci_order_checkout', {'id': order.id,'checkout':'spedition'}) }}" class="btn btn-success">{{ 'form.edit' | matra('Edit') }}</a>

</section>

{% elseif checkout.spedition == 'toset' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.set_spedition' | matra('Set Spedition') }}</h4>

</section>

{% endif %}

{% endif %} {# --- End Spedition ---  #}


{% if checkout.payment %} {# --- Payment ---  #}
{% set i = i + 1 %}

{% if checkout.payment == 'set' %}

<section class="page_content page_container row active">

	<h4>{{ i }} - {{ 'page.checkout.payment' | matra('Select Payment') }}</h4>

	{% render(controller('MaciOrderBundle:Default:cartSetPayment')) %}

</section>

{% elseif checkout.payment == 'setted' %}

<section class="page_content page_container row setted">

	<h4>{{ i }} - {{ 'page.checkout.payment_to' | matra('Payment') }}</h4>

	<span>{{ order.paymentLabel }}</span>

	<br/><br/>

	<a href="{{ path('maci_order_checkout', {'id': order.id,'checkout':'payment'}) }}" class="btn btn-success">{{ 'form.edit' | matra('Edit') }}</a>

</section>

{% elseif checkout.payment == 'toset' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.set_payment' | matra('Set Payment') }}</h4>

</section>

{% endif %}

{% endif %} {# --- End Payment ---  #}


{% if checkout.confirm %} {# --- Confirm ---  #}
{% set i = i + 1 %}

{% if checkout.confirm == 'set' %}

<section class="page_content page_container row active">

	<h4>{{ i }} - {{ 'page.checkout.confirm' | matra('Confirm Order') }}</h4>

	<a href="{{ path('maci_order_checkout_confirm') }}" class="btn btn-primary">{{ 'page.checkout.confirm' | matra('Confirm Order') }}</a>

</section>

{% elseif checkout.confirm == 'toset' %}

<section class="page_content page_container row">

	<h4>{{ i }} - {{ 'page.checkout.confirm' | matra('Confirm Order') }}</h4>

</section>

{% endif %}

{% endif %} {# --- End Confirm ---  #}



{% endif %} {# --- Checkout Defined ---  #}



{% else %} {# --- InValid Checkout ---  #}

<div class="row">

	<p>{{ 'page.no_content' | matra('No Content.') }}</p>

</div>

{% endif %} {# --- EndIf Checkout ---  #}

</div>
